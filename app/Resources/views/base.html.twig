{% extends '::_base.html.twig' %}

{% block body %}

{% if template is defined and template == "full" %}
<body class="full">
{% else %}
<body class="card">
{% endif %}

<menu role="menu">

  <a href="{{ path('g_home_community') }}" class="logo"><img src="{{ asset('/bundles/metageneral/img/logo/logo-64.png') }}" /><span>Igneet</span></a>

  {% render(controller("metaUserBundle:Security:currentUserMenu")) %}

  {% if shortcode is defined %}
    <div class="shortcode">
      <a id="shortcode-trigger" href="#" title="{{ "shortcode.help"|trans }}">
        <i class="fa fa-link fa-lg"></i> 
      </a>
      <form role="shortcode" id="shortcode" style="display: none;">
        <input type="text" onclick="this.select()" value="{{ shortcode|lower }}" />
      </form>
    </div>
  {% endif %}

</menu>

<div class="content-container menu-push">
  <!-- TODO -->
  <div id="flashes">

  {% for flashMessage in app.session.flashbag.get('success') %}
    <div class="alert alert-success">
        {{ flashMessage }}
        <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
  {% endfor %}
  {% for flashMessage in app.session.flashbag.get('warning') %}
    <div class="alert alert-warning">
        {{ flashMessage }}
        <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
  {% endfor %}
  {% for flashMessage in app.session.flashbag.get('error') %}
    <div class="alert alert-danger">
        {{ flashMessage }}
        <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
  {% endfor %}
  {% for flashMessage in app.session.flashbag.get('info') %}
    <div class="alert alert-info">
        {{ flashMessage }}
        <button type="button" class="close" data-dismiss="alert">×</button>
    </div>
  {% endfor %}

  </div>

  <nav role="mobile">
    <a href="#" class="menu-trigger"><i class="fa fa-bars fa-lg"></i></a>
    <a href="{{ path('g_home_community') }}" class="logo"><img src="{{ asset('/bundles/metageneral/img/logo/logo-64.png') }}" /><span>Igneet</span></a>
    <a href="{{ path('u_show_user_notifications') }}" class="notifications" title="{{ "user.notifications.help"|trans }}">
      <div>
        <i role="loading" class="fa fa-fw fa-spinner fa-spin"></i>
        <i role="loaded" class="fa fa-fw fa-bell" style="display: none;"></i><span class="help"> {{ "user.notifications.title"|trans }}</span>
      </div>
      <div class="notificationsCount" data-update-path="{{ path('u_count_user_notifications') }}" style="display: none;"></div>
    </a>
  </nav>

{% block container %}{% endblock %}
</div>

{% endblock %}
