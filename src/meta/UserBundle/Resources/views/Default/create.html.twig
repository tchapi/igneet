{% extends 'metaUserBundle::layout.html.twig' %}

{% block title %}{{ parent() }} > New user{% endblock %}

{% block javascripts %}
  {{ parent() }}
    {% javascripts '@metaGeneralBundle/Resources/public/js/select2.behaviour.js' 
            filter='?yui_js' %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block header %}
  <div class="headerAvatarAndActions">
    <div class="textAvatar"><i class="icon-magic"></i></div>
  </div>
  <div class="objectHeader">
    <h2><strong>Sign up now</strong> to join the adventure !</h2>
    <h4>And discover a great community of projects and makers at your fingertips.</h4>
    <p>It's free and easy, just fill in the few information below and you'll be ready to go, share and participate in projects. Of course you'll be able to change this information anytime later on.</p>
  </div>
{% endblock %}

{% form_theme form _self %}

{% use 'form_div_layout.html.twig' with field_widget as base_field_widget %}

{% block field_widget %}
    {{ block('base_field_widget') }}
    {% if required or attr.help is defined %}
        <span class="help-block">{% if required %}<span class="muted">* Required.</span>{% endif %} {% if attr.help is defined %}{{ attr.help }}{% endif %}</span>
    {% endif %}
{% endblock %}

{% block email_widget %}
    {{ block('base_field_widget') }}
    {% if required or attr.help is defined %}
        <span class="help-block">{% if required %}<span class="muted">* Required.</span>{% endif %} {% if attr.help is defined %}{{ attr.help }}{% endif %}</span>
    {% endif %}
{% endblock %}


{% block form_row %}
<div class="control-group {% if errors %}error{% endif %}">
  <label class="control-label" for="inputEmail">{{ form_label(form) }}</label>
  <div class="controls">
    {{ form_widget(form) }}
    {% if errors %}
    <span class="help-block error-block">{{ form_errors(form) }}</span>
    {% endif %}
  </div>
</div>
{% endblock form_row %}

{% block form_errors %}
    {% spaceless %}
        {% if errors|length > 0 %}
        <ul class="error_list">
            {% for error in errors %}
                <li><i class="icon-warning-sign"></i> {{
                    error.messagePluralization is null
                        ? error.messageTemplate|trans(error.messageParameters, 'validators')
                        : error.messageTemplate|transchoice(error.messagePluralization, error.messageParameters, 'validators')
                }}</li>
            {% endfor %}
        </ul>
        {% endif %}
    {% endspaceless %}
{% endblock form_errors %}

{% block content %}
<div class="formContent">
  <form action="{{ path('u_signup', { 'inviteToken': inviteToken }) }}" method="post" {{ form_enctype(form) }} class="form-horizontal">
      {{ form_widget(form) }}
      <div class="form-actions">
        <input type="submit" value="Create" class="btn btn-success" />
      </div>
  </form>
</div>
{% endblock %}