{% extends 'metaUserProfileBundle::layout.html.twig' %}

{% block title %}{{ parent() }} > Everybody{% endblock %}

{% block header %}
  <div class="headerAvatarAndActions">
    <div class="textAvatar"><i class="icon-group"></i></div>
  </div>
  <div class="objectHeader">
    <h2>Users</h2>
    <h4>All the users are listed in this page.</h4>
    <p>A profile is inherently public.</p>
  </div>
{% endblock %}

{% block content %}
{% if users %}
{% for user in users %}
<section class="listing">
  
  <a href="{{ path('u_show_user_profile', {'username': user.username}) }}">
    <img src="{{ asset(user.getAvatar()) }}" width="100" height="100"/>
  </a>

  <div class="listingItemInfo">
    <h4 class="ellipsis"><a href="{{ path('u_show_user_profile', {'username': user.username}) }}">{{ user.firstName }} {{ user.lastName|upper }}</a></h4>
    <div class="ellipsis">{{ user.headline }}</div>
    <div class="muted"><i class="icon-calendar"></i> Member since {{ user.createdAt|date("d/m/Y") }}</div>
  </div>
  {% if user.projectsOwned|length > 0 %}
  <div class="listingItemRelatedObjects">

    <div class="type">
      <div class="muted pull-right">{{ user.projectsOwned|length }} 
        project{% if (user.projectsOwned|length) > 1 %}s{% endif %} owned</div>
    </div>

    <ul>
      {% if user.projectsOwned|length > 5 %}
      <li>
        <div class="miniTextAvatar">...</div>
      </li>
      {% endif %}
      {% for project in user.getRandomProjectsOwned(5) %}
      <li>
        <a href="{{ path('sp_show_project', {'slug': project.slug}) }}">
          <img src="{{ project.picture }}" title="{{ project.name }} ({{ project.slug|lower }})" width="30" height="30" class="miniAvatar"/>
        </a>
      </li>
      {% endfor %}
    </ul>
  </div>
  {% endif %}

</section>
{% endfor %}
<section>
{% render "metaGeneralBundle:Default:pagination" with { 'route': 'u_show_list_recent_created', 'page' : pagination.page, 'total' : pagination.totalUsers } %}
</section>
{% else %}
<section>
No ideas yet !
</section>
{% endif %}

{% endblock %}